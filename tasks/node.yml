  # - name: install nvm -> load env vars -> install node lts & npm
  #   shell: curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash && export NVM_DIR="$HOME/.nvm" && [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" && [ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion" && nvm install --lts
  #   tags:
  #   - node
  # - name: Add node to path
  #   become: true
  #   lineinfile:
  #     path: /etc/environment
  #     line: PATH="$HOME/.nvm/versions/node/$(nvm current)/bin:$PATH"
  #   tags:
  #   - node

- name: Install nodejs and npm
  become: true
  apt:
    name: ["nodejs", "npm"]
  tags:
    - install
    - node

- name: npmjs prefix
  shell: mkdir -p ~/.local/.npm-global
  tags:
  - install
  - node

# - name: add npmjs to path
#   shell: PATH=~/.local/.npm-global/bin:$PATH
#   tags:
#   - install
#   - node

- name: add npmjs to path
  environment:
    PATH: "{{ ansible_env.HOME }}/.local/.npm-global/bin:{{ ansible_env.PATH }}"
  tags:
    - install
    - node

- name: npmjs global settings
  shell: npm config set prefix '~/.local/.npm-global/bin'
  tags:
  - install
  - node

- name: npmjs global settings export path in case I don't have dotfiles installed
  shell: export PATH=~/.local/.npm-global/bin:$PATH
  tags:
  - install
  - node
  - npm

- name: Install N
  npm:
    name: n
    global: yes
  tags:
    - install
    - node

- name: Install correct version of Node
  shell: n 18
  tags:
    - install
    - node